{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/satyam/nikki/web3-basics/react-three-fiber/image-gallery/src/Scene.jsx"],"sourcesContent":["'use client'\n\nimport * as THREE from 'three'\nimport { useEffect, useRef, useState } from 'react'\nimport { Canvas, useFrame } from '@react-three/fiber'\nimport { useCursor, MeshReflectorMaterial, Image, Text, Environment, Html } from '@react-three/drei'\nimport { useRouter } from 'next/navigation' // Replaces useLocation\nimport { easing } from 'maath'\nimport getUuid from 'uuid-by-string'\n\nconst GOLDENRATIO = 1.61803398874\n\nexport const Scene = ({ images, activeId = null , basePath = '/gallery' }) => (\n  <Canvas dpr={[1, 1.5]} camera={{ fov: 70, position: [0, 2, 15] }}>\n    <color attach=\"background\" args={['#191920']} />\n    <fog attach=\"fog\" args={['#191920', 0, 15]} />\n    <group position={[0, -0.5, 0]}>\n      <Frames images={images} activeId={activeId} />\n      <mesh rotation={[-Math.PI / 2, 0, 0]}>\n        <planeGeometry args={[50, 50]} />\n        <MeshReflectorMaterial\n          blur={[300, 100]}\n          resolution={2048}\n          mixBlur={1}\n          mixStrength={80}\n          roughness={1}\n          depthScale={1.2}\n          minDepthThreshold={0.4}\n          maxDepthThreshold={1.4}\n          color=\"#050505\"\n          metalness={0.5}\n        />\n      </mesh>\n    </group>\n    <Environment preset=\"city\" />\n  </Canvas>\n)\n\nfunction Frames({ images, activeId, basePath, q = new THREE.Quaternion(), p = new THREE.Vector3() }) {\n  const ref = useRef()\n  const clicked = useRef()\n  const router = useRouter()\n\n  useEffect(() => {\n    // Find object by the activeId passed from Next.js Page params\n    clicked.current = ref.current.getObjectByName(activeId)\n    if (clicked.current) {\n      clicked.current.parent.updateWorldMatrix(true, true)\n      clicked.current.parent.localToWorld(p.set(0, GOLDENRATIO / 2, 1.25))\n      clicked.current.parent.getWorldQuaternion(q)\n    } else {\n      p.set(0, 0, 5.5)\n      q.identity()\n    }\n  })\n\n  useFrame((state, dt) => {\n    easing.damp3(state.camera.position, p, 0.4, dt)\n    easing.dampQ(state.camera.quaternion, q, 0.4, dt)\n  })\n\n  return (\n    <group\n      ref={ref}\n      onClick={(e) => {\n        e.stopPropagation()\n        // Navigate using Next.js router\n        const target = clicked.current === e.object ? basePath : '/item/' + e.object.name\n        router.push(target)\n      }}\n      onPointerMissed={() => router.push('/')}>\n      {images.map((props) => <Frame key={props.url} {...props} activeId={activeId} />)}\n    </group>\n  )\n}\n\nfunction Frame({ url, c = new THREE.Color(), activeId, ...props }) {\n  const image = useRef()\n  const frame = useRef()\n  const [hovered, hover] = useState(false)\n  const [rnd] = useState(() => Math.random())\n  const name = getUuid(url)\n  const isActive = activeId === name\n  \n  useCursor(hovered)\n  useFrame((state, dt) => {\n    image.current.material.zoom = 1.2 + Math.sin(rnd * 10000 + state.clock.elapsedTime / 3) / 4\n    easing.damp3(image.current.scale, [0.80 * (!isActive && hovered ? 0.85 : 1), 0.9 * (!isActive && hovered ? 0.905 : 1), 1], 0.1, dt)\n    easing.dampC(frame.current.material.color, hovered ? 'orange' : 'white', 0.1, dt)\n  })\n\n  const handleDownload = (e) => {\n    e.stopPropagation()\n    window.open(url, '_blank')\n  }\n  \n  const handleShare = (e) => {\n    e.stopPropagation()\n    alert(`Sharing: ${name}`)\n  }\n\n  return (\n    <group {...props}>\n      <mesh\n        name={name}\n        onPointerOver={(e) => (e.stopPropagation(), hover(true))}\n        onPointerOut={() => hover(false)}\n        scale={[1, GOLDENRATIO, 0.05]}\n        position={[0, GOLDENRATIO / 2, 0]}>\n        <boxGeometry />\n        <meshStandardMaterial color=\"#151515\" metalness={0.5} roughness={0.5} envMapIntensity={2} />\n        <mesh ref={frame} raycast={() => null} scale={[0.9, 0.93, 0.9]} position={[0, 0, 0.2]}>\n          <boxGeometry />\n          <meshBasicMaterial toneMapped={false} fog={false} />\n        </mesh>\n        <Image raycast={() => null} ref={image} position={[0, 0, 0.7]} url={url} />\n      </mesh>\n\n      <Text maxWidth={0.1} \n      anchorX=\"left\" \n      anchorY=\"top\" \n      position={[0.55, GOLDENRATIO, 0]} \n      fontSize={0.025} \n      color={hovered ? 'orange' : isActive ? '#00fff00' : 'white'}\n      >\n         {isActive ? '★ ' : hovered ? '→ ' : ''}{name.split('-').join(' ')}\n      </Text>\n\n      \n      {hovered && !isActive && (\n        <Text maxWidth={0.8}\n          anchorX=\"left\"\n          anchorY=\"top\"\n          position={[0.55, GOLDENRATIO - 0.1, 0]}\n          fontSize={0.02}\n          color=\"#aaaaaa\">\n          Click to view details\n          </Text>\n      )}\n    \n      {isActive && (\n        <Html\n          position={[0, -0.3, 0]}\n          center\n          distanceFactor={1.5}\n          style={{ pointerEvents: 'auto' }}>\n          <div className=\"flex gap-2 bg-black/80 p-4 rounded-lg border border-orange-500/50\">\n            <button\n              onClick={handleDownload}\n              className=\"px-4 py-2 rounded text-white text-sm font-bold cursor-pointer border-none\">\n              View Full\n            </button>\n            <button\n              onClick={handleShare}\n              className=\"px-4 py-2 rounded text-white text-sm font-bold cursor-pointer border-none\">\n              Share\n            </button>\n          </div>\n        </Html>\n      )}\n      \n      {hovered && !isActive && (\n        <Html\n          position={[0, -0.3, 0]}\n          center\n          distanceFactor={1.5}\n          style={{ pointerEvents: 'none' }}>\n          <div className=\"px-3 py-1.5 bg-[rgba(255,165,0,0.2)] rounded border border-orange-500/50 text-orange-500 text-xs font-bold\">\n            CLICK TO VIEW\n          </div>\n        </Html>\n      )}\n    </group>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}