{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/satyam/nikki/web3-basics/react-three-fiber/image-gallery/src/Scene.jsx"],"sourcesContent":["'use client'\n\nimport * as THREE from 'three'\nimport { useEffect, useRef, useState } from 'react'\nimport { Canvas, useFrame } from '@react-three/fiber'\nimport { useCursor, MeshReflectorMaterial, Image, Text, Environment, Html } from '@react-three/drei'\nimport { useRouter } from 'next/navigation'\nimport { easing } from 'maath'\nimport getUuid from 'uuid-by-string'\n\nconst GOLDENRATIO = 1.61803398874\n\nexport const Scene = ({ images, activeId = null , basePath = '/gallery' }) => (\n  <Canvas dpr={[1, 1.5]} camera={{ fov: 70, position: [0, 2, 15] }}>\n    <color attach=\"background\" args={['#191920']} />\n    <fog attach=\"fog\" args={['#191920', 0, 15]} />\n    <group position={[0, -0.5, 0]}>\n      <Frames images={images} activeId={activeId} />\n      <mesh rotation={[-Math.PI / 2, 0, 0]}>\n        <planeGeometry args={[50, 50]} />\n        <MeshReflectorMaterial\n          blur={[300, 100]}\n          resolution={2048}\n          mixBlur={1}\n          mixStrength={80}\n          roughness={1}\n          depthScale={1.2}\n          minDepthThreshold={0.4}\n          maxDepthThreshold={1.4}\n          color=\"#050505\"\n          metalness={0.5}\n        />\n      </mesh>\n    </group>\n    <Environment preset=\"city\" />\n  </Canvas>\n)\n\nfunction Frames({ images, activeId, basePath, q = new THREE.Quaternion(), p = new THREE.Vector3() }) {\n  const ref = useRef()\n  const clicked = useRef()\n  const router = useRouter()\n\n  useEffect(() => {\n    clicked.current = ref.current.getObjectByName(activeId)\n    if (clicked.current) {\n      clicked.current.parent.updateWorldMatrix(true, true)\n      clicked.current.parent.localToWorld(p.set(0, GOLDENRATIO / 2, 1.25))\n      clicked.current.parent.getWorldQuaternion(q)\n    } else {\n      p.set(0, 0, 5.5)\n      q.identity()\n    }\n  })\n\n  useFrame((state, dt) => {\n    easing.damp3(state.camera.position, p, 0.4, dt)\n    easing.dampQ(state.camera.quaternion, q, 0.4, dt)\n  })\n\n  return (\n    <group\n      ref={ref}\n      onClick={(e) => {\n        e.stopPropagation()\n        const target = clicked.current === e.object ? basePath : '/item/' + e.object.name\n        router.push(target)\n      }}\n      onPointerMissed={() => router.push('/')}>\n      {images.map((props) => <Frame key={props.url} {...props} activeId={activeId} />)}\n    </group>\n  )\n}\n\nfunction Frame({ url, c = new THREE.Color(), activeId, ...props }) {\n  const image = useRef()\n  const frame = useRef()\n  const router = useRouter()\n  const [hovered, hover] = useState(false)\n  const [liked, setLiked] = useState(false) \n  const [rnd] = useState(() => Math.random())\n  const name = getUuid(url)\n  const isActive = activeId === name\n  \n  useCursor(hovered)\n  useFrame((state, dt) => {\n    image.current.material.zoom = 1.2 + Math.sin(rnd * 10000 + state.clock.elapsedTime / 3) / 4\n    easing.damp3(image.current.scale, [0.80 * (!isActive && hovered ? 0.85 : 1), 0.9 * (!isActive && hovered ? 0.905 : 1), 1], 0.1, dt)\n    easing.dampC(frame.current.material.color, hovered ? 'orange' : 'white', 0.1, dt)\n  })\n\n  const handleDetails = (e) => {\n    e.stopPropagation()\n    router.push(`/item/${name}`)\n  }\n  \n  const toggleLike = (e) => {\n    e.stopPropagation()\n    setLiked(!liked)\n  }\n\n  const handleDownload = (e) => {\n    e.stopPropagation()\n    window.open(url, '_blank')\n  }\n\n  const handleShare = (e) => {\n    e.stopPropagation()\n    alert(`Sharing: ${name}`)\n  }\n\n  return (\n    <group {...props}>\n      <mesh\n        name={name}\n        onPointerOver={(e) => (e.stopPropagation(), hover(true))}\n        onPointerOut={() => hover(false)}\n        scale={[1, GOLDENRATIO, 0.05]}\n        position={[0, GOLDENRATIO / 2, 0]}>\n        <boxGeometry />\n        <meshStandardMaterial color=\"#151515\" metalness={0.5} roughness={0.5} envMapIntensity={2} />\n        <mesh ref={frame} raycast={() => null} scale={[0.9, 0.93, 0.9]} position={[0, 0, 0.2]}>\n          <boxGeometry />\n          <meshBasicMaterial toneMapped={false} fog={false} />\n        </mesh>\n        <Image raycast={() => null} ref={image} position={[0, 0, 0.7]} url={url} />\n      </mesh>\n\n      <Text maxWidth={0.1} \n      anchorX=\"left\" \n      anchorY=\"top\" \n      position={[0.55, GOLDENRATIO, 0]} \n      fontSize={0.025} \n      color={hovered ? 'orange' : isActive ? '#00fff00' : 'white'}\n      >\n         {isActive ? '★ ' : hovered ? '→ ' : ''}{name.split('-').join(' ')}\n      </Text>\n\n      {/* Hover text when NOT active */}\n      {hovered && !isActive && (\n        <Text maxWidth={0.8}\n          anchorX=\"left\"\n          anchorY=\"top\"\n          position={[0.55, GOLDENRATIO - 0.1, 0]}\n          fontSize={0.02}\n          color=\"#aaaaaa\">\n          Click to zoom\n        </Text>\n      )}\n    \n      {/* Active State UI - MOVED TO RIGHT SIDE */}\n      {isActive && (\n        <Html\n          // x=1.1 puts it to the right of the image\n          // y=GOLDENRATIO/2 keeps it vertically centered with the image\n          position={[1.1, GOLDENRATIO / 2, 0]} \n          center\n          distanceFactor={1} // Adjusted for better visibility\n          style={{ pointerEvents: 'auto' }}>\n          \n          <div className=\"flex flex-col items-center gap-2 p-3 rounded-xl bg-black/80 border border-white/10 backdrop-blur-md shadow-2xl min-w-[120px]\">\n            \n            <div className=\"text-white text-xs font-medium mb-1 tracking-widest text-center\">ACTIONS</div>\n\n            <button\n              onClick={handleDetails}\n              className=\"w-full px-4 py-2 bg-white text-black rounded-lg text-sm font-bold hover:bg-gray-200 transition-colors cursor-pointer\"\n            >\n              Details\n            </button>\n\n            <div className=\"flex gap-2 w-full\">\n              <button\n                onClick={toggleLike}\n                className={`flex-1 flex justify-center items-center p-2 rounded-lg border transition-all duration-300 cursor-pointer ${\n                  liked \n                    ? 'bg-red-500/20 border-red-500 text-red-500' \n                    : 'bg-transparent border-white/20 text-white hover:bg-white/10'\n                }`}\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill={liked ? \"currentColor\" : \"none\"} stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"w-5 h-5\">\n                  <path d=\"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\" />\n                </svg>\n              </button>\n\n              <button\n                onClick={handleShare}\n                className=\"flex-1 flex justify-center items-center p-2 rounded-lg border border-white/20 text-white hover:bg-white/10 transition-all duration-300 cursor-pointer\"\n              >\n                 <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"w-5 h-5\">\n                  <path d=\"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8\" />\n                  <polyline points=\"16 6 12 2 8 6\" />\n                  <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"15\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </Html>\n      )}\n    </group>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}